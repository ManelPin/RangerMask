<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
    <title>Masking Demo</title>
	<script type="text/javascript" src="jquery-1.4.4.js" ></script>
	<script type="text/javascript" src="jquery.rangerMask.js" ></script>
</head>
<body>
<table>
<tr><td></td><td><input type="text" value="before" /></td></tr>
<tr><td>SSN:</td><td><input id="ssn" type="text" value="" maxlength=11 /> 999-99-9999</td></tr>
<tr><td></td><td><input type="text" value="between" /></td></tr>
<tr><td>$:</td><td><input id="currency" type="text" value="" maxlength=13 /> $9{0,9}.00 <input type=button value="Change" onclick="$('#currency').val('$9.95')" /> </td></tr>
<tr><td></td><td><input type="text" value="between" /></td></tr>
<tr><td>Date:</td><td><input id="date" type="text" value="" maxlength=13 /> mm//dd//yyyy hh:mm tt</td></tr>
<tr><td></td><td><input type="text" value="between" /></td></tr>
<tr><td>Zip:</td><td><input id="zip" type="text" value="" maxlength=13 /> 99999(-9999)</td></tr>
<tr><td></td><td><input type="text" value="between" /></td></tr>
<tr><td>%:</td><td><input id="percent" type="text" value="" maxlength=13 /> 09?.000%</td></tr>
<tr><td></td><td><input type="text" value="after" /></td></tr>
</table>

<script type="text/javascript" language="javascript">
	function AddCommaToCurrency(number)
	{
		if(number == "")
			return number;

		var dollars = number.slice(1, number.indexOf("."));
		if(dollars.length > 3)
		{
			var mod = dollars.length % 3;
			var output = (mod > 0 ? dollars.substring(0, mod) : '');
			for(var i = 0; i < Math.floor(dollars.length / 3); i++)
			{
				if (mod == 0 && i == 0)
					output += dollars.substring(mod + 3 * i, mod + 3 * i + 3);
				else
					output += ',' + dollars.substring(mod + 3 * i, mod + 3 * i + 3);
			}
			return '$' + output + number.substring(number.indexOf("."));
		}
		return number;
	}

	function EnterCurrencyMask(event, data)
	{
	    var element = $(event.target);
		element.val(element.val().replace(",", ""));
	}

	function ExitCurrencyMask(event, data)
	{
	    var element = $(event.target);
		element.val(AddCommaToCurrency(element.val()));
	}

	$(document).ready(function ()
	{
		var ssnMask = RangerMask.define("999-99-9999", { showMaskWhenEmpty: false })
		$("#ssn").rangerMask(ssnMask);
		var currencyMask = RangerMask.define("$9{0,9}.00", { showMaskWhenEmpty: false });
		$("#currency").rangerMask(currencyMask).bind("beforeMaskIn", EnterCurrencyMask).bind("afterMaskOut", ExitCurrencyMask);
		var dateMask = RangerMask.define("mm//dd//yyyy hh:mm tt", { showMaskWhenEmpty: true })
		$("#date").rangerMask(dateMask);
		var zipMask = RangerMask.define("99999(-9999)")
		$("#zip").rangerMask(zipMask);
		var percentMask = RangerMask.define("09?.000%", { showMaskWhenEmpty: false })
		$("#percent").rangerMask(percentMask);
	});
</script>
</body>
</html>